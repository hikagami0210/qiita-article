---
title: ã€MUI DataGrid Ã— dnd kitã€‘ æŒ‡å®šã—ãŸrenderCellã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿ãƒ‰ãƒ©ãƒƒã‚°ãŒåå¿œã™ã‚‹ã‚ˆã†ã«ã™ã‚‹
tags:
  - DataGrid
  - React
  - MUI
  - dndkit
private: false
updated_at: '2024-12-22T22:09:19+09:00'
id: 63a48280086608f4a39e
organization_url_name: null
slide: false
ignorePublish: false
---
# ã¯ã˜ã‚ã«

ä»Šå›ã¯ã€MUI DataGrid Ã— dnd kitã§ã€æŒ‡å®šã—ãŸrenderCellã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿ãƒ‰ãƒ©ãƒƒã‚°ãŒåå¿œã™ã‚‹ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

æ­£ç›´ã€ã‹ãªã‚Šç„¡ç†çŸ¢ç†ãªæ–¹æ³•ãªã®ã§ã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ãŒã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆã§æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ğŸ™‡â€â™‚ï¸

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³

- @dnd-kit/core: ^6.3.1
- @dnd-kit/sortable: ^10.0.0
- @mui/x-data-grid: ^7.22.3
- react: 18.3.1
- next: 15.0.3

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```tsx
import { useSortable } from '@dnd-kit/sortable';
import Box from '@mui/material/Box';
import {
  GridRow,
  type GridRowProps,
  type GridRenderCellParams,
} from '@mui/x-data-grid';
import { cloneElement, isValidElement, memo } from 'react';
import { CSS } from '@dnd-kit/utilities';

const DraggableGridRow = memo((params: GridRowProps) => {
  const { attributes, listeners, setNodeRef, transform, transition } =
    useSortable({ id: params.rowId });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
  };

  const enhancedParam = (param: GridRowProps) => {
    const updatedVisibleColumns = [...param.visibleColumns];
    if (updatedVisibleColumns[0]?.renderCell) {
      const originalRenderCell = updatedVisibleColumns[0].renderCell;

      // renderCellã‚’ãƒ©ãƒƒãƒ—ã—ã¦æ–°ã—ã„ã‚‚ã®ã«ç½®ãæ›ãˆ
      updatedVisibleColumns[0] = {
        ...updatedVisibleColumns[0], // renderCellä»¥å¤–ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç¶­æŒ
        renderCell: (cellParams: GridRenderCellParams) => {
          // å…ƒã®renderCellãŒè¿”ã™è¦ç´ ã‚’å–å¾—
          const originalElement = originalRenderCell(cellParams);

          if (isValidElement(originalElement)) {
            // ãƒ‰ãƒ©ãƒƒã‚°ç”¨ã®å±æ€§ã‚’è¿½åŠ ã—è¦ç´ ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦è¿”ã™
            return cloneElement(originalElement, {
              ...attributes,
              ...listeners,
            });
          }

          return originalElement;
        },
      };
    }

    return {
      ...param,
      visibleColumns: updatedVisibleColumns,
    };
  };

  const updatedParams = enhancedParam(params);

  return (
    <Box ref={setNodeRef} style={style}>
      <GridRow {...updatedParams} />
    </Box>
  );
});

DraggableGridRow.displayName = 'DraggableGridRow';

export default DraggableGridRow;
```

### ã¡ã‚‡ã“ã£ã¨è§£èª¬

useSortableã§è¿”ã•ã‚Œã‚‹attributesã¨listenersã‚’ã€GridRowã®renderCellã§è¿”ã•ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã™ã“ã¨ã§ã€è¡Œã®ä¸­ã§ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéƒ¨åˆ†ã®ã¿ãƒ‰ãƒ©ãƒƒã‚°ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ä»–ã®åˆ—ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€`updatedVisibleColumns[0]`ã®éƒ¨åˆ†ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

## ãŠã‚ã‚Šã«

çŸ­ã„ã§ã™ãŒã€ä»¥ä¸ŠãŒMUI DataGrid Ã— dnd kitã§ã€æŒ‡å®šã—ãŸrenderCellã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿ãƒ‰ãƒ©ãƒƒã‚°ãŒåå¿œã™ã‚‹ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã®ç´¹ä»‹ã§ã—ãŸã€‚

ã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ãŒã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆã§æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ï¼

æœ€å¾Œã¾ã§èª­ã‚“ã§ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼
